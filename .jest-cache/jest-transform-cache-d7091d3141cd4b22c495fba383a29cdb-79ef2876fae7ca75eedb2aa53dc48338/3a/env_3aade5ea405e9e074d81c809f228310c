99767e36541dbbe1f3ff28ccb39493c9
import dotenv from 'dotenv';
import path from 'path';
import { fileURLToPath } from 'url';
import awsSecretsManager from './awsSecretsManager.js';
const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

// Load .env first (public variables)
dotenv.config({
  path: path.resolve(__dirname, '../../.env'),
  override: false // Don't override if already set
});

// Only load .env.local in non-test environments to prevent overriding test configuration
if (process.env.NODE_ENV !== 'test') {
  // Load .env.local second (private variables, will override .env if needed)
  dotenv.config({
    path: path.resolve(__dirname, '../../.env.local'),
    override: true // Override existing values
  });
}

// Load secrets from AWS Secrets Manager in production
async function loadAWSSecrets() {
  if (awsSecretsManager.isAWSEnvironment()) {
    try {
      console.log('ðŸ” Loading secrets from AWS Secrets Manager...');

      // Load application secrets
      const appSecrets = await awsSecretsManager.getAppSecrets();
      Object.keys(appSecrets).forEach(key => {
        if (!process.env[key]) {
          // Don't override existing env vars
          process.env[key] = appSecrets[key];
        }
      });

      // Load blockchain secrets
      const blockchainSecrets = await awsSecretsManager.getBlockchainSecrets();
      Object.keys(blockchainSecrets).forEach(key => {
        if (!process.env[key]) {
          // Don't override existing env vars
          process.env[key] = blockchainSecrets[key];
        }
      });
      console.log('âœ… AWS Secrets Manager integration successful');
    } catch (error) {
      console.error('âŒ Failed to load secrets from AWS Secrets Manager:', error.message);
      // In production, we might want to exit the process if secrets can't be loaded
      if (process.env.NODE_ENV === 'production') {
        console.error('ðŸš¨ Cannot start application without required secrets in production');
        process.exit(1);
      }
    }
  }
}

// Export a function to validate required environment variables
export function validateEnvVars(requiredVars = []) {
  const missing = requiredVars.filter(varName => !process.env[varName]);
  if (missing.length > 0) {
    throw new Error(`Missing required environment variables: ${missing.join(', ')}`);
  }
}

// Export common environment configurations
export const config = {
  NODE_ENV: process.env.NODE_ENV || 'development',
  PORT: process.env.PORT || 3000,
  FRONTEND_URL: process.env.FRONTEND_URL,
  // AWS Configuration
  AWS_REGION: process.env.AWS_REGION || 'us-east-1',
  USE_AWS_SECRETS: process.env.USE_AWS_SECRETS || 'false',
  // Firebase config
  FIREBASE_PROJECT_ID: process.env.FIREBASE_PROJECT_ID,
  FIREBASE_STORAGE_BUCKET: process.env.FIREBASE_STORAGE_BUCKET,
  FIREBASE_API_KEY: process.env.FIREBASE_API_KEY,
  FIREBASE_AUTH_DOMAIN: process.env.FIREBASE_AUTH_DOMAIN,
  FIREBASE_MESSAGING_SENDER_ID: process.env.FIREBASE_MESSAGING_SENDER_ID,
  FIREBASE_APP_ID: process.env.FIREBASE_APP_ID,
  FIREBASE_MEASUREMENT_ID: process.env.FIREBASE_MEASUREMENT_ID,
  GOOGLE_APPLICATION_CREDENTIALS: process.env.GOOGLE_APPLICATION_CREDENTIALS,
  // Blockchain config
  RPC_URL: process.env.RPC_URL,
  SEPOLIA_RPC_URL: process.env.SEPOLIA_RPC_URL,
  CHAIN_ID: process.env.CHAIN_ID,
  DEPLOYER_PRIVATE_KEY: process.env.DEPLOYER_PRIVATE_KEY,
  BACKEND_WALLET_PRIVATE_KEY: process.env.BACKEND_WALLET_PRIVATE_KEY,
  // Security
  JWT_SECRET: process.env.JWT_SECRET,
  ENCRYPTION_KEY: process.env.ENCRYPTION_KEY,
  DATABASE_ENCRYPTION_KEY: process.env.DATABASE_ENCRYPTION_KEY,
  ALLOWED_EMAILS: process.env.ALLOWED_EMAILS,
  // Email config
  SMTP_HOST: process.env.SMTP_HOST,
  SMTP_PORT: process.env.SMTP_PORT,
  SMTP_USER: process.env.SMTP_USER,
  SMTP_PASS: process.env.SMTP_PASS,
  // Test config
  TEST_USER_A_EMAIL: process.env.TEST_USER_A_EMAIL,
  TEST_USER_A_PASSWORD: process.env.TEST_USER_A_PASSWORD,
  TEST_USER_A_PK: process.env.TEST_USER_A_PK,
  TEST_USER_B_EMAIL: process.env.TEST_USER_B_EMAIL,
  TEST_USER_B_PASSWORD: process.env.TEST_USER_B_PASSWORD,
  TEST_USER_B_PK: process.env.TEST_USER_B_PK,
  // Emulator config
  FIRESTORE_EMULATOR_HOST: process.env.FIRESTORE_EMULATOR_HOST,
  FIREBASE_AUTH_EMULATOR_HOST: process.env.FIREBASE_AUTH_EMULATOR_HOST,
  FIREBASE_STORAGE_EMULATOR_HOST: process.env.FIREBASE_STORAGE_EMULATOR_HOST,
  // Scheduled jobs
  CRON_SCHEDULE_DEADLINE_CHECKS: process.env.CRON_SCHEDULE_DEADLINE_CHECKS,
  // API Keys
  INFURA_API_KEY: process.env.INFURA_API_KEY,
  ALCHEMY_API_KEY: process.env.ALCHEMY_API_KEY
};

// Initialize AWS secrets loading
await loadAWSSecrets();

// Log environment loading status (only in development)
if (config.NODE_ENV === 'development') {
  console.log('ðŸ”§ Environment variables loaded from .env and .env.local');
} else if (config.NODE_ENV === 'production') {
  console.log('ðŸ”§ Production environment variables loaded');
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3RlbnYiLCJwYXRoIiwiZmlsZVVSTFRvUGF0aCIsImF3c1NlY3JldHNNYW5hZ2VyIiwiX19maWxlbmFtZSIsImltcG9ydCIsIm1ldGEiLCJ1cmwiLCJfX2Rpcm5hbWUiLCJkaXJuYW1lIiwiY29uZmlnIiwicmVzb2x2ZSIsIm92ZXJyaWRlIiwicHJvY2VzcyIsImVudiIsIk5PREVfRU5WIiwibG9hZEFXU1NlY3JldHMiLCJpc0FXU0Vudmlyb25tZW50IiwiY29uc29sZSIsImxvZyIsImFwcFNlY3JldHMiLCJnZXRBcHBTZWNyZXRzIiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJrZXkiLCJibG9ja2NoYWluU2VjcmV0cyIsImdldEJsb2NrY2hhaW5TZWNyZXRzIiwiZXJyb3IiLCJtZXNzYWdlIiwiZXhpdCIsInZhbGlkYXRlRW52VmFycyIsInJlcXVpcmVkVmFycyIsIm1pc3NpbmciLCJmaWx0ZXIiLCJ2YXJOYW1lIiwibGVuZ3RoIiwiRXJyb3IiLCJqb2luIiwiUE9SVCIsIkZST05URU5EX1VSTCIsIkFXU19SRUdJT04iLCJVU0VfQVdTX1NFQ1JFVFMiLCJGSVJFQkFTRV9QUk9KRUNUX0lEIiwiRklSRUJBU0VfU1RPUkFHRV9CVUNLRVQiLCJGSVJFQkFTRV9BUElfS0VZIiwiRklSRUJBU0VfQVVUSF9ET01BSU4iLCJGSVJFQkFTRV9NRVNTQUdJTkdfU0VOREVSX0lEIiwiRklSRUJBU0VfQVBQX0lEIiwiRklSRUJBU0VfTUVBU1VSRU1FTlRfSUQiLCJHT09HTEVfQVBQTElDQVRJT05fQ1JFREVOVElBTFMiLCJSUENfVVJMIiwiU0VQT0xJQV9SUENfVVJMIiwiQ0hBSU5fSUQiLCJERVBMT1lFUl9QUklWQVRFX0tFWSIsIkJBQ0tFTkRfV0FMTEVUX1BSSVZBVEVfS0VZIiwiSldUX1NFQ1JFVCIsIkVOQ1JZUFRJT05fS0VZIiwiREFUQUJBU0VfRU5DUllQVElPTl9LRVkiLCJBTExPV0VEX0VNQUlMUyIsIlNNVFBfSE9TVCIsIlNNVFBfUE9SVCIsIlNNVFBfVVNFUiIsIlNNVFBfUEFTUyIsIlRFU1RfVVNFUl9BX0VNQUlMIiwiVEVTVF9VU0VSX0FfUEFTU1dPUkQiLCJURVNUX1VTRVJfQV9QSyIsIlRFU1RfVVNFUl9CX0VNQUlMIiwiVEVTVF9VU0VSX0JfUEFTU1dPUkQiLCJURVNUX1VTRVJfQl9QSyIsIkZJUkVTVE9SRV9FTVVMQVRPUl9IT1NUIiwiRklSRUJBU0VfQVVUSF9FTVVMQVRPUl9IT1NUIiwiRklSRUJBU0VfU1RPUkFHRV9FTVVMQVRPUl9IT1NUIiwiQ1JPTl9TQ0hFRFVMRV9ERUFETElORV9DSEVDS1MiLCJJTkZVUkFfQVBJX0tFWSIsIkFMQ0hFTVlfQVBJX0tFWSJdLCJzb3VyY2VzIjpbImVudi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZG90ZW52IGZyb20gJ2RvdGVudic7XG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJztcbmltcG9ydCB7IGZpbGVVUkxUb1BhdGggfSBmcm9tICd1cmwnO1xuaW1wb3J0IGF3c1NlY3JldHNNYW5hZ2VyIGZyb20gJy4vYXdzU2VjcmV0c01hbmFnZXIuanMnO1xuXG5jb25zdCBfX2ZpbGVuYW1lID0gZmlsZVVSTFRvUGF0aChpbXBvcnQubWV0YS51cmwpO1xuY29uc3QgX19kaXJuYW1lID0gcGF0aC5kaXJuYW1lKF9fZmlsZW5hbWUpO1xuXG4vLyBMb2FkIC5lbnYgZmlyc3QgKHB1YmxpYyB2YXJpYWJsZXMpXG5kb3RlbnYuY29uZmlnKHsgXG4gIHBhdGg6IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICcuLi8uLi8uZW52JyksXG4gIG92ZXJyaWRlOiBmYWxzZSAgLy8gRG9uJ3Qgb3ZlcnJpZGUgaWYgYWxyZWFkeSBzZXRcbn0pO1xuXG4vLyBPbmx5IGxvYWQgLmVudi5sb2NhbCBpbiBub24tdGVzdCBlbnZpcm9ubWVudHMgdG8gcHJldmVudCBvdmVycmlkaW5nIHRlc3QgY29uZmlndXJhdGlvblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAndGVzdCcpIHtcbiAgLy8gTG9hZCAuZW52LmxvY2FsIHNlY29uZCAocHJpdmF0ZSB2YXJpYWJsZXMsIHdpbGwgb3ZlcnJpZGUgLmVudiBpZiBuZWVkZWQpXG4gIGRvdGVudi5jb25maWcoeyBcbiAgICBwYXRoOiBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnLi4vLi4vLmVudi5sb2NhbCcpLFxuICAgIG92ZXJyaWRlOiB0cnVlICAgLy8gT3ZlcnJpZGUgZXhpc3RpbmcgdmFsdWVzXG4gIH0pO1xufVxuXG4vLyBMb2FkIHNlY3JldHMgZnJvbSBBV1MgU2VjcmV0cyBNYW5hZ2VyIGluIHByb2R1Y3Rpb25cbmFzeW5jIGZ1bmN0aW9uIGxvYWRBV1NTZWNyZXRzKCkge1xuICBpZiAoYXdzU2VjcmV0c01hbmFnZXIuaXNBV1NFbnZpcm9ubWVudCgpKSB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnNvbGUubG9nKCfwn5SQIExvYWRpbmcgc2VjcmV0cyBmcm9tIEFXUyBTZWNyZXRzIE1hbmFnZXIuLi4nKTtcbiAgICAgIFxuICAgICAgLy8gTG9hZCBhcHBsaWNhdGlvbiBzZWNyZXRzXG4gICAgICBjb25zdCBhcHBTZWNyZXRzID0gYXdhaXQgYXdzU2VjcmV0c01hbmFnZXIuZ2V0QXBwU2VjcmV0cygpO1xuICAgICAgT2JqZWN0LmtleXMoYXBwU2VjcmV0cykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgICBpZiAoIXByb2Nlc3MuZW52W2tleV0pIHsgLy8gRG9uJ3Qgb3ZlcnJpZGUgZXhpc3RpbmcgZW52IHZhcnNcbiAgICAgICAgICBwcm9jZXNzLmVudltrZXldID0gYXBwU2VjcmV0c1trZXldO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gTG9hZCBibG9ja2NoYWluIHNlY3JldHNcbiAgICAgIGNvbnN0IGJsb2NrY2hhaW5TZWNyZXRzID0gYXdhaXQgYXdzU2VjcmV0c01hbmFnZXIuZ2V0QmxvY2tjaGFpblNlY3JldHMoKTtcbiAgICAgIE9iamVjdC5rZXlzKGJsb2NrY2hhaW5TZWNyZXRzKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgICAgIGlmICghcHJvY2Vzcy5lbnZba2V5XSkgeyAvLyBEb24ndCBvdmVycmlkZSBleGlzdGluZyBlbnYgdmFyc1xuICAgICAgICAgIHByb2Nlc3MuZW52W2tleV0gPSBibG9ja2NoYWluU2VjcmV0c1trZXldO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgY29uc29sZS5sb2coJ+KchSBBV1MgU2VjcmV0cyBNYW5hZ2VyIGludGVncmF0aW9uIHN1Y2Nlc3NmdWwnKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcign4p2MIEZhaWxlZCB0byBsb2FkIHNlY3JldHMgZnJvbSBBV1MgU2VjcmV0cyBNYW5hZ2VyOicsIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgLy8gSW4gcHJvZHVjdGlvbiwgd2UgbWlnaHQgd2FudCB0byBleGl0IHRoZSBwcm9jZXNzIGlmIHNlY3JldHMgY2FuJ3QgYmUgbG9hZGVkXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBjb25zb2xlLmVycm9yKCfwn5qoIENhbm5vdCBzdGFydCBhcHBsaWNhdGlvbiB3aXRob3V0IHJlcXVpcmVkIHNlY3JldHMgaW4gcHJvZHVjdGlvbicpO1xuICAgICAgICBwcm9jZXNzLmV4aXQoMSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8vIEV4cG9ydCBhIGZ1bmN0aW9uIHRvIHZhbGlkYXRlIHJlcXVpcmVkIGVudmlyb25tZW50IHZhcmlhYmxlc1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlRW52VmFycyhyZXF1aXJlZFZhcnMgPSBbXSkge1xuICBjb25zdCBtaXNzaW5nID0gcmVxdWlyZWRWYXJzLmZpbHRlcih2YXJOYW1lID0+ICFwcm9jZXNzLmVudlt2YXJOYW1lXSk7XG4gIFxuICBpZiAobWlzc2luZy5sZW5ndGggPiAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBNaXNzaW5nIHJlcXVpcmVkIGVudmlyb25tZW50IHZhcmlhYmxlczogJHttaXNzaW5nLmpvaW4oJywgJyl9YCk7XG4gIH1cbn1cblxuLy8gRXhwb3J0IGNvbW1vbiBlbnZpcm9ubWVudCBjb25maWd1cmF0aW9uc1xuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgTk9ERV9FTlY6IHByb2Nlc3MuZW52Lk5PREVfRU5WIHx8ICdkZXZlbG9wbWVudCcsXG4gIFBPUlQ6IHByb2Nlc3MuZW52LlBPUlQgfHwgMzAwMCxcbiAgRlJPTlRFTkRfVVJMOiBwcm9jZXNzLmVudi5GUk9OVEVORF9VUkwsXG4gIFxuICAvLyBBV1MgQ29uZmlndXJhdGlvblxuICBBV1NfUkVHSU9OOiBwcm9jZXNzLmVudi5BV1NfUkVHSU9OIHx8ICd1cy1lYXN0LTEnLFxuICBVU0VfQVdTX1NFQ1JFVFM6IHByb2Nlc3MuZW52LlVTRV9BV1NfU0VDUkVUUyB8fCAnZmFsc2UnLFxuICBcbiAgLy8gRmlyZWJhc2UgY29uZmlnXG4gIEZJUkVCQVNFX1BST0pFQ1RfSUQ6IHByb2Nlc3MuZW52LkZJUkVCQVNFX1BST0pFQ1RfSUQsXG4gIEZJUkVCQVNFX1NUT1JBR0VfQlVDS0VUOiBwcm9jZXNzLmVudi5GSVJFQkFTRV9TVE9SQUdFX0JVQ0tFVCxcbiAgRklSRUJBU0VfQVBJX0tFWTogcHJvY2Vzcy5lbnYuRklSRUJBU0VfQVBJX0tFWSxcbiAgRklSRUJBU0VfQVVUSF9ET01BSU46IHByb2Nlc3MuZW52LkZJUkVCQVNFX0FVVEhfRE9NQUlOLFxuICBGSVJFQkFTRV9NRVNTQUdJTkdfU0VOREVSX0lEOiBwcm9jZXNzLmVudi5GSVJFQkFTRV9NRVNTQUdJTkdfU0VOREVSX0lELFxuICBGSVJFQkFTRV9BUFBfSUQ6IHByb2Nlc3MuZW52LkZJUkVCQVNFX0FQUF9JRCxcbiAgRklSRUJBU0VfTUVBU1VSRU1FTlRfSUQ6IHByb2Nlc3MuZW52LkZJUkVCQVNFX01FQVNVUkVNRU5UX0lELFxuICBHT09HTEVfQVBQTElDQVRJT05fQ1JFREVOVElBTFM6IHByb2Nlc3MuZW52LkdPT0dMRV9BUFBMSUNBVElPTl9DUkVERU5USUFMUyxcbiAgXG4gIC8vIEJsb2NrY2hhaW4gY29uZmlnXG4gIFJQQ19VUkw6IHByb2Nlc3MuZW52LlJQQ19VUkwsXG4gIFNFUE9MSUFfUlBDX1VSTDogcHJvY2Vzcy5lbnYuU0VQT0xJQV9SUENfVVJMLFxuICBDSEFJTl9JRDogcHJvY2Vzcy5lbnYuQ0hBSU5fSUQsXG4gIERFUExPWUVSX1BSSVZBVEVfS0VZOiBwcm9jZXNzLmVudi5ERVBMT1lFUl9QUklWQVRFX0tFWSxcbiAgQkFDS0VORF9XQUxMRVRfUFJJVkFURV9LRVk6IHByb2Nlc3MuZW52LkJBQ0tFTkRfV0FMTEVUX1BSSVZBVEVfS0VZLFxuICBcbiAgLy8gU2VjdXJpdHlcbiAgSldUX1NFQ1JFVDogcHJvY2Vzcy5lbnYuSldUX1NFQ1JFVCxcbiAgRU5DUllQVElPTl9LRVk6IHByb2Nlc3MuZW52LkVOQ1JZUFRJT05fS0VZLFxuICBEQVRBQkFTRV9FTkNSWVBUSU9OX0tFWTogcHJvY2Vzcy5lbnYuREFUQUJBU0VfRU5DUllQVElPTl9LRVksXG4gIEFMTE9XRURfRU1BSUxTOiBwcm9jZXNzLmVudi5BTExPV0VEX0VNQUlMUyxcbiAgXG4gIC8vIEVtYWlsIGNvbmZpZ1xuICBTTVRQX0hPU1Q6IHByb2Nlc3MuZW52LlNNVFBfSE9TVCxcbiAgU01UUF9QT1JUOiBwcm9jZXNzLmVudi5TTVRQX1BPUlQsXG4gIFNNVFBfVVNFUjogcHJvY2Vzcy5lbnYuU01UUF9VU0VSLFxuICBTTVRQX1BBU1M6IHByb2Nlc3MuZW52LlNNVFBfUEFTUyxcbiAgXG4gIC8vIFRlc3QgY29uZmlnXG4gIFRFU1RfVVNFUl9BX0VNQUlMOiBwcm9jZXNzLmVudi5URVNUX1VTRVJfQV9FTUFJTCxcbiAgVEVTVF9VU0VSX0FfUEFTU1dPUkQ6IHByb2Nlc3MuZW52LlRFU1RfVVNFUl9BX1BBU1NXT1JELFxuICBURVNUX1VTRVJfQV9QSzogcHJvY2Vzcy5lbnYuVEVTVF9VU0VSX0FfUEssXG4gIFRFU1RfVVNFUl9CX0VNQUlMOiBwcm9jZXNzLmVudi5URVNUX1VTRVJfQl9FTUFJTCxcbiAgVEVTVF9VU0VSX0JfUEFTU1dPUkQ6IHByb2Nlc3MuZW52LlRFU1RfVVNFUl9CX1BBU1NXT1JELFxuICBURVNUX1VTRVJfQl9QSzogcHJvY2Vzcy5lbnYuVEVTVF9VU0VSX0JfUEssXG4gIFxuICAvLyBFbXVsYXRvciBjb25maWdcbiAgRklSRVNUT1JFX0VNVUxBVE9SX0hPU1Q6IHByb2Nlc3MuZW52LkZJUkVTVE9SRV9FTVVMQVRPUl9IT1NULFxuICBGSVJFQkFTRV9BVVRIX0VNVUxBVE9SX0hPU1Q6IHByb2Nlc3MuZW52LkZJUkVCQVNFX0FVVEhfRU1VTEFUT1JfSE9TVCxcbiAgRklSRUJBU0VfU1RPUkFHRV9FTVVMQVRPUl9IT1NUOiBwcm9jZXNzLmVudi5GSVJFQkFTRV9TVE9SQUdFX0VNVUxBVE9SX0hPU1QsXG4gIFxuICAvLyBTY2hlZHVsZWQgam9ic1xuICBDUk9OX1NDSEVEVUxFX0RFQURMSU5FX0NIRUNLUzogcHJvY2Vzcy5lbnYuQ1JPTl9TQ0hFRFVMRV9ERUFETElORV9DSEVDS1MsXG4gIFxuICAvLyBBUEkgS2V5c1xuICBJTkZVUkFfQVBJX0tFWTogcHJvY2Vzcy5lbnYuSU5GVVJBX0FQSV9LRVksXG4gIEFMQ0hFTVlfQVBJX0tFWTogcHJvY2Vzcy5lbnYuQUxDSEVNWV9BUElfS0VZLFxufTtcblxuLy8gSW5pdGlhbGl6ZSBBV1Mgc2VjcmV0cyBsb2FkaW5nXG5hd2FpdCBsb2FkQVdTU2VjcmV0cygpO1xuXG4vLyBMb2cgZW52aXJvbm1lbnQgbG9hZGluZyBzdGF0dXMgKG9ubHkgaW4gZGV2ZWxvcG1lbnQpXG5pZiAoY29uZmlnLk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gIGNvbnNvbGUubG9nKCfwn5SnIEVudmlyb25tZW50IHZhcmlhYmxlcyBsb2FkZWQgZnJvbSAuZW52IGFuZCAuZW52LmxvY2FsJyk7XG59IGVsc2UgaWYgKGNvbmZpZy5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGNvbnNvbGUubG9nKCfwn5SnIFByb2R1Y3Rpb24g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